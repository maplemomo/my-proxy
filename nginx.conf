# 关键：强制 Nginx 在前台运行，防止容器启动后立即退出
daemon off;

events {
    worker_connections 1024;
}

http {
    server {
        # 建议改用 8080 端口，避免部分环境对 80 端口的限制
        listen 8080;

        location / {
            # 转发到你的华为云
            proxy_pass http://121.36.42.11:8080;

            # 核心伪装：防止域名阻断
            proxy_set_header Host 121.36.42.11;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;

            # 响应大模型，增加超时时间
            proxy_read_timeout 300s;
        }
    }
}
