events {
    worker_connections 1024;
}

http {
    server {
        listen 8080;

        location / {
            # 指向你刚才调通的 8080 端口
            proxy_pass http://121.36.42.11:8080;

            # 关键伪装：将 Host 设置为 IP，躲避华为云的域名阻断
            proxy_set_header Host 121.36.42.11;
            
            # 传递真实访问信息
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;

            # 增加超时容错，防止大模型响应慢导致断连
            proxy_connect_timeout 30s;
            proxy_read_timeout 300s;
            proxy_send_timeout 300s;
        }
    }
}
