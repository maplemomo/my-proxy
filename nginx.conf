# 关键：这行强制 Nginx 在前台运行，解决 Zeabur “一直启动中”的问题
daemon off;

events {
    worker_connections 1024;
}

http {
    server {
        # 我们统一使用 8080 端口，避开特权端口限制
        listen 8080;

        location / {
            # 转发到你的华为云 8080
            proxy_pass http://121.36.42.11:8080;

            # 核心伪装策略，防止域名阻断
            proxy_set_header Host 121.36.42.11;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;

            # 响应大模型所需的长连接超时
            proxy_read_timeout 300s;
        }
    }
}
